{"version":3,"file":"static/js/43.40c10b10.chunk.js","mappings":"wVAuDMA,EAAyB,IAAIC,EAAAA,MAAYC,KAAKC,GAAK,EAAGD,KAAKC,GAAK,EAAG,GAsIzE,EApIsB,SAACC,GACrB,IAAAC,GAA6BC,EAAAA,EAAAA,GAAQC,GAA7BC,EAAKH,EAALG,MAAOC,EAASJ,EAATI,UAETC,GAAUC,EAAAA,EAAAA,UACVC,GAAcD,EAAAA,EAAAA,QAAmB,MACjCE,GAAoBF,EAAAA,EAAAA,QAAoB,OAE9CG,EAAAA,EAAAA,IAAS,WAAO,IAADC,EAAAC,EAAAC,EACPC,GAAWC,EAAAA,EAAAA,IAA4BC,EAAAA,EAAAA,YACvCC,GAAkBC,EAAAA,EAAAA,IAAmCF,EAAAA,EAAAA,YAEvDV,EAAQa,UACVb,EAAQa,QAAQC,KAAOH,GACnBI,EAAAA,EAAAA,IAAsBP,EAASQ,QAAQ,GAAI,GAC3C,IAGa,QAAnBX,EAAAH,EAAYW,eAAO,IAAAR,GAAU,QAAVC,EAAnBD,EAAqBY,gBAAQ,IAAAX,GAA7BA,EAA+BY,KAC7BP,EAAkBQ,KAtBE,OAyBtB,IAAMC,EACJ5B,KAAKC,GAAK,EAAKD,KAAKC,GAAKe,EAAYa,EAAAA,GAEvC/B,EAAuBgC,IACrBhC,EAAuBiC,EACvBH,EACA9B,EAAuBkC,GAGA,QAAzBjB,EAAAJ,EAAkBU,eAAO,IAAAN,GAAzBA,EAA2BkB,qBAAqBnC,EAClD,IA2BA,OACEoC,EAAAA,EAAAA,MAAA,SAAAC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAWjC,GAAK,IAAEkC,QAAS,KAAKC,SAAA,EAC9BH,EAAAA,EAAAA,MAAA,SACEI,IAAK3B,EACLc,SAAU,CAAC,KAAM,KAAM,QACvBc,SAAU,CAACvC,KAAKC,GAAK,EAAG,EAAG,GAC3BuC,MAAO,EAAE,OAAQ,MAAO,OACxBC,eAAgBC,EAAAA,GAChBC,eAAgBC,EAAAA,GAChBC,QA5Bc,SAACC,GACnB,IAEMC,GAFW9B,EAAAA,EAAAA,IAA4BC,EAAAA,EAAAA,YAGhClB,KAAKgD,MAAMF,EAAEG,QAAUC,EAAAA,GAA+B,EAC7DC,EACJnD,KAAKoD,MAAuC,KAAhCL,EAAcM,OAAOC,UAAkB,IAErDpC,EAAAA,EAAAA,UACEqC,EAAAA,EAAAA,KACEC,EAAAA,EAAAA,IACEL,EACAM,EAAAA,GACA5B,EAAAA,KAIR,EAW2BQ,SAAA,EAErBqB,EAAAA,EAAAA,KAAA,QACEC,SAAUrD,EAAMsD,YAAYD,SAC5BE,SAAUtD,EAAUuD,mBAEtBJ,EAAAA,EAAAA,KAAA,QACEC,SAAUrD,EAAMyD,cAAcJ,SAC9BE,SAAUtD,EAAUyD,iBAGxBN,EAAAA,EAAAA,KAAA,QACEpB,IAAK5B,EACLiD,SAAUrD,EAAM2D,SAASN,SACzBE,SAAUtD,EAAU2D,MACpBzC,SAAU,CAAC,MAAO,IAAM,QACxBc,SAAU,CAAC,GAAIvC,KAAKC,GAAK,EAAG,GAC5BuC,MAAO,CAAC,KAAM,KAAM,MACpB2B,QApDmB,WACvB,IAAMhD,GAAkBC,EAAAA,EAAAA,IAAmCF,EAAAA,EAAAA,YAE3DA,EAAAA,EAAAA,UAAekD,EAAAA,EAAAA,KAAiCjD,GAClD,EAiDMsB,eAAgB4B,EAAAA,GAChB1B,eAAgBC,EAAAA,MAElBV,EAAAA,EAAAA,MAAA,SACET,SAAU,CAAC,KAAM,MAAO,QACxBc,SAAU,CAACvC,KAAKC,GAAK,EAAG,EAAG,GAC3BuC,MAAO,CAAC,KAAM,OAAQ,MAAMH,SAAA,EAE5BqB,EAAAA,EAAAA,KAAA,QACEC,SAAUrD,EAAMgE,QAAQX,SACxBE,SAAUtD,EAAUyD,cAEtBN,EAAAA,EAAAA,KAAA,QAAMC,SAAUrD,EAAMiE,UAAUZ,SAAUE,SAAUtD,EAAUiE,UAC9Dd,EAAAA,EAAAA,KAAA,QAAMC,SAAUrD,EAAMmE,UAAUd,SAAUE,SAAUtD,EAAUmE,QAC9DhB,EAAAA,EAAAA,KAAA,QAAMC,SAAUrD,EAAMqE,UAAUhB,SAAUE,SAAUtD,EAAUqE,QAC9DlB,EAAAA,EAAAA,KAAA,QACEC,SAAUrD,EAAMuE,UAAUlB,SAC1BE,SAAUtD,EAAUuE,cAEtBpB,EAAAA,EAAAA,KAAA,QAAMC,SAAUrD,EAAMyE,UAAUpB,SAAUE,SAAUtD,EAAUyE,YAGhEtB,EAAAA,EAAAA,KAACuB,EAAAA,EAAI,CACH3C,IAAK9B,EACL0E,SAAU,GACVC,MAAM,UACN3C,MAAO,CAAC,GAAK,EAAG,GAChBf,SAAU,EAAE,IAAK,EAAG,KACpB2D,KAAK,iFAAgF/C,SAEpF,OAGHqB,EAAAA,EAAAA,KAAC2B,EAAAA,GAAsB,CACrBC,SAAS,iBACT7D,SAAU,IAAI1B,EAAAA,SAAe,GAAI,GAAI,QAGvC2D,EAAAA,EAAAA,KAAC2B,EAAAA,GAAsB,CACrBC,SAAS,iBACT7D,SAAU,IAAI1B,EAAAA,QAAc,EAAG,GAAI,UAI3C,C","sources":["models/CurrentSource/CurrentSource.tsx"],"sourcesContent":["import * as THREE from 'three'\nimport { store } from 'src/store'\nimport { GLTF } from 'three-stdlib'\nimport React, { useRef } from 'react'\nimport { Text, useGLTF } from '@react-three/drei'\nimport { TerminalConnectingZone } from '@components'\nimport CurrentSourceModelPath from './currentSource.glb'\nimport { useFrame, ThreeEvent } from '@react-three/fiber'\nimport {\n  setCurrentSourceAmperage,\n  setCurrentSourceIsPowerSupplied,\n} from '@slices'\nimport {\n  selectCurrentSourceAmperage,\n  selectCurrentSourceIsPowerSupplied,\n} from '@selectors'\nimport {\n  CURRENT_SOURCE_AMPERAGE_MAX,\n  CURRENT_SOURCE_AMPERAGE_MIN,\n  CURRENT_SOURCE_AMPERAGE_STEP,\n} from '@constants'\nimport {\n  numberBetween,\n  setDefaultCursor,\n  setPointerCursor,\n  setRotationCursor,\n  addInsignificantZeros,\n} from '@utils'\n\ntype GLTFResult = GLTF & {\n  nodes: {\n    Cylinder002: THREE.Mesh\n    Cylinder002_1: THREE.Mesh\n    power001: THREE.Mesh\n    Text061: THREE.Mesh\n    Text061_1: THREE.Mesh\n    Text061_2: THREE.Mesh\n    Text061_3: THREE.Mesh\n    Text061_4: THREE.Mesh\n    Text061_5: THREE.Mesh\n  }\n  materials: {\n    tabl_background: THREE.MeshStandardMaterial\n    Black_line: THREE.MeshStandardMaterial\n    power: THREE.MeshStandardMaterial\n    metall: THREE.MeshPhysicalMaterial\n    blue: THREE.MeshStandardMaterial\n    grey: THREE.MeshStandardMaterial\n    black_line: THREE.MeshStandardMaterial\n    black: THREE.MeshStandardMaterial\n  }\n}\n\nconst powerBtnPositionZ = 103.5\n\nconst amperageSwitchRotation = new THREE.Euler(Math.PI / 2, Math.PI / 2, 0)\n\nconst CurrentSource = (props: JSX.IntrinsicElements['group']) => {\n  const { nodes, materials } = useGLTF(CurrentSourceModelPath) as GLTFResult\n\n  const textRef = useRef<Text & { text: string }>()\n  const powerBtnRef = useRef<THREE.Mesh>(null)\n  const amperageSwitchRef = useRef<THREE.Group>(null)\n\n  useFrame(() => {\n    const amperage = selectCurrentSourceAmperage(store.getState())\n    const isPowerSupplied = selectCurrentSourceIsPowerSupplied(store.getState())\n\n    if (textRef.current) {\n      textRef.current.text = isPowerSupplied\n        ? addInsignificantZeros(amperage.toFixed(2), 1)\n        : ''\n    }\n\n    powerBtnRef.current?.position?.setZ(\n      isPowerSupplied ? powerBtnPositionZ - 6 : powerBtnPositionZ,\n    )\n\n    const angle =\n      Math.PI / 2 - (Math.PI * amperage) / CURRENT_SOURCE_AMPERAGE_MAX\n\n    amperageSwitchRotation.set(\n      amperageSwitchRotation.x,\n      angle,\n      amperageSwitchRotation.z,\n    )\n\n    amperageSwitchRef.current?.setRotationFromEuler(amperageSwitchRotation)\n  })\n\n  const handlePowerClick = () => {\n    const isPowerSupplied = selectCurrentSourceIsPowerSupplied(store.getState())\n\n    store.dispatch(setCurrentSourceIsPowerSupplied(!isPowerSupplied))\n  }\n\n  const handleWheel = (e: ThreeEvent<WheelEvent>) => {\n    const amperage = selectCurrentSourceAmperage(store.getState())\n\n    const newAmperage =\n      amperage + Math.sign(-e.deltaY) * CURRENT_SOURCE_AMPERAGE_STEP * 3\n    const newRoundedAmperage =\n      Math.round((newAmperage + Number.EPSILON) * 100) / 100\n\n    store.dispatch(\n      setCurrentSourceAmperage(\n        numberBetween(\n          newRoundedAmperage,\n          CURRENT_SOURCE_AMPERAGE_MIN,\n          CURRENT_SOURCE_AMPERAGE_MAX,\n        ),\n      ),\n    )\n  }\n\n  return (\n    <group {...props} dispose={null}>\n      <group\n        ref={amperageSwitchRef}\n        position={[5.84, 5.61, 105.19]}\n        rotation={[Math.PI / 2, 0, 0]}\n        scale={[-12.81, -6.02, -12.81]}\n        onPointerEnter={setRotationCursor}\n        onPointerLeave={setDefaultCursor}\n        onWheel={handleWheel}\n      >\n        <mesh\n          geometry={nodes.Cylinder002.geometry}\n          material={materials.tabl_background}\n        />\n        <mesh\n          geometry={nodes.Cylinder002_1.geometry}\n          material={materials.Black_line}\n        />\n      </group>\n      <mesh\n        ref={powerBtnRef}\n        geometry={nodes.power001.geometry}\n        material={materials.power}\n        position={[94.96, 0.85, 102.85]}\n        rotation={[0, -Math.PI / 2, 0]}\n        scale={[3.92, 5.58, 5.58]}\n        onClick={handlePowerClick}\n        onPointerEnter={setPointerCursor}\n        onPointerLeave={setDefaultCursor}\n      />\n      <group\n        position={[86.4, 40.49, 101.59]}\n        rotation={[Math.PI / 2, 0, 0]}\n        scale={[6.64, 144.05, 6.64]}\n      >\n        <mesh\n          geometry={nodes.Text061.geometry}\n          material={materials.Black_line}\n        />\n        <mesh geometry={nodes.Text061_1.geometry} material={materials.metall} />\n        <mesh geometry={nodes.Text061_2.geometry} material={materials.blue} />\n        <mesh geometry={nodes.Text061_3.geometry} material={materials.grey} />\n        <mesh\n          geometry={nodes.Text061_4.geometry}\n          material={materials.black_line}\n        />\n        <mesh geometry={nodes.Text061_5.geometry} material={materials.black} />\n      </group>\n\n      <Text\n        ref={textRef}\n        fontSize={34}\n        color='#F44336'\n        scale={[0.7, 1, 1]}\n        position={[-73, -1, 102]}\n        font='https://cdnjs.cloudflare.com/ajax/libs/firacode/6.2.0/woff/FiraCode-Light.woff'\n      >\n        {' '}\n      </Text>\n\n      <TerminalConnectingZone\n        terminal='CurrentSource+'\n        position={new THREE.Vector3(-68, 68, 116)}\n      />\n\n      <TerminalConnectingZone\n        terminal='CurrentSource-'\n        position={new THREE.Vector3(0, 68, 116)}\n      />\n    </group>\n  )\n}\n\nexport default CurrentSource\n"],"names":["amperageSwitchRotation","THREE","Math","PI","props","_ref","useGLTF","CurrentSourceModelPath","nodes","materials","textRef","useRef","powerBtnRef","amperageSwitchRef","useFrame","_powerBtnRef$current","_powerBtnRef$current$","_amperageSwitchRef$cu","amperage","selectCurrentSourceAmperage","store","isPowerSupplied","selectCurrentSourceIsPowerSupplied","current","text","addInsignificantZeros","toFixed","position","setZ","powerBtnPositionZ","angle","CURRENT_SOURCE_AMPERAGE_MAX","set","x","z","setRotationFromEuler","_jsxs","_objectSpread","dispose","children","ref","rotation","scale","onPointerEnter","setRotationCursor","onPointerLeave","setDefaultCursor","onWheel","e","newAmperage","sign","deltaY","CURRENT_SOURCE_AMPERAGE_STEP","newRoundedAmperage","round","Number","EPSILON","setCurrentSourceAmperage","numberBetween","CURRENT_SOURCE_AMPERAGE_MIN","_jsx","geometry","Cylinder002","material","tabl_background","Cylinder002_1","Black_line","power001","power","onClick","setCurrentSourceIsPowerSupplied","setPointerCursor","Text061","Text061_1","metall","Text061_2","blue","Text061_3","grey","Text061_4","black_line","Text061_5","black","Text","fontSize","color","font","TerminalConnectingZone","terminal"],"sourceRoot":""}